<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="head(title,style)">
    <meta charset="UTF-8">
    <title th:replace="${title}"></title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/public.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/lib/layui/css/layui.css}" />
    <script th:src="@{/lib/layui/layui.js}" type="text/javascript" charset="utf-8"></script>
    <script th:src="@{/js/public.js}" type="text/javascript" charset="utf-8"></script>
    <style th:replace="${style}"></style>
</head>
<body>
<!--body导航栏切片-->
<div class="header" th:fragment="header(pageName)">
    <div class="container" style="display:flex;align-items:center;width:100%;">
        <div class="logo" style="flex:0 0 auto;">
            <a th:href="@{/index}">网上书店系统</a>
        </div>
        <div class="nav-right" style="flex:1 1 auto;">
            <ul class="layui-nav" th:if="${session.user!=null}">
                <li class="layui-nav-item" th:classappend="${pageName=='cart'?'layui-this':''}">
                    <a th:href="@{|/${session.user.userName}/shopping_cart|}">购物车</a>
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:;">
                        <span id="header-balance">余额：--</span>&nbsp;
                        <span id="header-credit">等级：--</span>
                    </a>
                </li>
                <li class="layui-nav-item">
                    <a href="javascript:;">[[${session.user.userName}]]</a>
                    <dl class="layui-nav-child">
                        <dd><a th:href="@{|/${session.user.userName}/orders|}">个人订单</a></dd>
                        <dd><a th:href="@{/user_center}">个人中心</a></dd>
                        <dd><a th:href="@{/logout}">退出</a></dd>
                    </dl>
                </li>
            </ul>
            <ul class="layui-nav" th:if="${session.user==null}">
                <li class="layui-nav-item"><a th:href="@{/login}">登录</a></li>
                <li class="layui-nav-item"><a th:href="@{/register}">注册</a></li>
            </ul>
        </div>
    </div>
        <!-- 在未登录状态下也保留余额/等级占位，便于前端通过 AJAX 同步显示（登录后页面可刷新显示实际菜单） -->
        <ul class="layui-nav layui-bg-green" style="float: right;" th:if="${session.user==null}">
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <span id="header-balance">余额：--</span>&nbsp;
                    <span id="header-credit">等级：--</span>
                </a>
            </li>
            <li class="layui-nav-item">
                <a th:href="@{/user_center}">个人中心</a>
            </li>
        </ul>
    </div>
</div>
<!--body底部栏切片-->
<div class="footer" th:fragment="footer">
    &copy; bookshop
</div>
</body>
</html>