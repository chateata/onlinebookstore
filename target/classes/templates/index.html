<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="_fragment::head(~{::title},~{})">
    <meta charset="utf-8">
    <title>网上书店</title>
    <link rel="stylesheet" type="text/css" href="../static/css/public.css"/>
    <link rel="stylesheet" type="text/css" href="../static/lib/layui/css/layui.css"/>
    <script src="../static/lib/layui/layui.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<div class="header" th:replace="_fragment::header(null)">
    <div class="page-wrapper">
        <div class="logo" style="float: left;">
            网上书店
        </div>
        <ul class="layui-nav" style="float: right;">
            <li class="layui-nav-item">
                <a href="/xx/xxx?userId=xxx">购物车</a>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img src="//t.cn/RCzsdCq" class="layui-nav-img">我
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;">修改信息</a></dd>
                    <dd><a href="javascript:;">个人订单</a></dd>
                    <dd><a href="javascript:;">退出</a></dd>
                </dl>
            </li>
        </ul>
        <!-- <ul class="layui-nav" style="float: right;">
                <li class="layui-nav-item">
                    <a href="">登录</a>
                </li>
                <li class="layui-nav-item">
                    <a href="">注册</a>
                </li>
            </ul> -->
    </div>
</div>
<!-- 搜索栏 -->
<div class="search-bar">
    <div class="page-wrapper">
        <div class="search-input">
            <select id="search-type" class="layui-select" style="width: 120px;">
                <option value="all">全部</option>
                <option value="isbn">ISBN</option>
                <option value="bookName">书名</option>
                <option value="press">出版社</option>
            </select>
            <input type="text" id="keyword-input" name="keyword" placeholder="请输入ISBN、书名或出版社" autocomplete="off"
                   class="layui-input" style="width: calc(100% - 130px);">
            <button type="button" id="search-btn" class="layui-btn">搜索</button>
        </div>
    </div>
</div>
<div class="page-wrapper">
    <div class="layui-tab layui-tab-brief" lay-filter="categoryTabBrief">
        <ul class="layui-tab-title" style="text-align: center;" id="category_tag">
            <li lay-id="search">搜索结果</li>
            <li class="layui-this">全部</li>
        </ul>
        <div class="layui-tab-content" id="content"></div>
    </div>
    <div class="page-util" id="page-util" style="text-align: center;"></div>
</div>
<div class="footer" th:replace="_fragment::footer">
    &copy; bookshop
</div>
</body>
<script type="text/javascript" th:src="@{/js/index.js}"></script>
<script type="text/html" id="book-card-tpl" th:inline="none">
    {{# layui.each(d.data,function(index,item){   }}
    <div class="book-card {{# if(item.stock <= 0){ }}out-of-stock{{# } }}">
        <a href="/index/books/details/{{item.bookId}}">
            {{# if(item.image){ }}
            <img src="/images/book_images/{{item.image}}" alt="{{item.bookName}}" {{# if(item.stock <= 0){ }}class="out-of-stock-image"{{# } }}/>
            {{# } else { }}
            <div class="no-image-placeholder">
                <div class="no-image-text">暂无图片</div>
            </div>
            {{# } }}
            {{# if(item.stock <= 0){ }}
            <div class="out-of-stock-overlay">
                <span class="out-of-stock-text">缺货</span>
            </div>
            {{# } }}
        </a>
        <p class="name">
            <a href="/index/books/details/{{item.bookId}}" title="{{item.description}}">{{item.bookName}}</a>
        </p>
        <p class="author" th:inline="none" title="{{ item.authorsDisplay || item.author }}">
            {{ item.authorsDisplay || item.author }}
        </p>
        {{# if(item.series && item.series.seriesName){ }}
        <p class="series">
            <span class="layui-badge-rim">{{item.series.seriesName}}</span>
        </p>
        {{# } }}
        <p class="price">
            {{# if(d.userDiscountRate){ }}
            <span class="original-price">¥{{item.price}}</span>
            <span class="discount-text">{{d.userDiscountText}}</span>
            <span class="discounted-price">¥{{d.calculateDiscountedPrice(item.price)}}</span>
            {{# } else { }}
            <span class="layui-icon layui-icon-rmb">&nbsp;{{item.price}}</span>
            {{# } }}
        </p>
    </div>
    {{#    });    }}
</script>
</html>
